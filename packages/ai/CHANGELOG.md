# posthog-ai

## 7.8.9

### Patch Changes

- [#3069](https://github.com/PostHog/posthog-js/pull/3069) [`c81ee34`](https://github.com/PostHog/posthog-js/commit/c81ee34096a780b13e97a862197d4a6fdedb749a) Thanks [@dependabot](https://github.com/apps/dependabot)! - dependencies updates: - Updated dependency [`@google/genai@^1.40.0` ↗︎](https://www.npmjs.com/package/@google/genai/v/1.40.0) (from `^1.38.0`, in `dependencies`) (2026-02-10)
- Updated dependencies [[`0acf16f`](https://github.com/PostHog/posthog-js/commit/0acf16fcbf8c32d5f28b86b6fa200271ad0b647e)]:
  - @posthog/core@1.22.0
  - posthog-node@5.24.15

## 7.8.8

### Patch Changes

- Updated dependencies [[`d578824`](https://github.com/PostHog/posthog-js/commit/d578824395ceba3b854970c2a7723e97466d9e9d)]:
  - @posthog/core@1.21.0
  - posthog-node@5.24.14

## 7.8.7

### Patch Changes

- Updated dependencies [[`e055f9a`](https://github.com/PostHog/posthog-js/commit/e055f9a344d7c11309c56444383f79df335a5c51)]:
  - @posthog/core@1.20.2
  - posthog-node@5.24.12

## 7.8.6

### Patch Changes

- Updated dependencies [[`8f75dae`](https://github.com/PostHog/posthog-js/commit/8f75dae39ae2938624ca49e778915a92f2491556)]:
  - @posthog/core@1.20.1
  - posthog-node@5.24.11

## 7.8.5

### Patch Changes

- [#3021](https://github.com/PostHog/posthog-js/pull/3021) [`e7ceae5`](https://github.com/PostHog/posthog-js/commit/e7ceae5b5a3a95df84519d99014d587f1d86fd5c) Thanks [@Radu-Raicea](https://github.com/Radu-Raicea)! - fix(llma): small prompt management fixes
  (2026-02-04)

- [#3030](https://github.com/PostHog/posthog-js/pull/3030) [`98d6274`](https://github.com/PostHog/posthog-js/commit/98d6274a1da337560b2acf4f62eeefba1f8e5fd4) Thanks [@Radu-Raicea](https://github.com/Radu-Raicea)! - Changes prompts default URL.
  (2026-02-04)
- Updated dependencies [[`bb62809`](https://github.com/PostHog/posthog-js/commit/bb62809917845685ae7e2e6d5adad6be5528356e)]:
  - @posthog/core@1.20.0
  - posthog-node@5.24.10

## 7.8.4

### Patch Changes

- Updated dependencies [[`c99e5fe`](https://github.com/PostHog/posthog-js/commit/c99e5feb043870357c8f722eb52542327c3f472b)]:
  - @posthog/core@1.19.0
  - posthog-node@5.24.9

## 7.8.3

### Patch Changes

- [#3008](https://github.com/PostHog/posthog-js/pull/3008) [`26adbc8`](https://github.com/PostHog/posthog-js/commit/26adbc8bc9271090cbed667cf81c24c1639b4a1f) Thanks [@dependabot](https://github.com/apps/dependabot)! - dependencies updates: - Updated dependency [`@anthropic-ai/sdk@^0.72.1` ↗︎](https://www.npmjs.com/package/@anthropic-ai/sdk/v/0.72.1) (from `^0.71.2`, in `dependencies`) - Updated dependency [`openai@^6.17.0` ↗︎](https://www.npmjs.com/package/openai/v/6.17.0) (from `^6.16.0`, in `dependencies`) (2026-02-03)
- Updated dependencies [[`7768010`](https://github.com/PostHog/posthog-js/commit/77680105f1e8baf5ed1934d423494793d11ff01a)]:
  - @posthog/core@1.18.0
  - posthog-node@5.24.8

## 7.8.2

### Patch Changes

- Updated dependencies [[`727536c`](https://github.com/PostHog/posthog-js/commit/727536cf5f1ab5a8d21fa9d4e2e6b13efc851fca)]:
  - @posthog/core@1.17.0
  - posthog-node@5.24.7

## 7.8.1

### Patch Changes

- Updated dependencies [[`cbe84c1`](https://github.com/PostHog/posthog-js/commit/cbe84c1ea8b6dd398569ed401139e9698e08fd64)]:
  - @posthog/core@1.16.0
  - posthog-node@5.24.6

## 7.8.0

### Minor Changes

- [#2915](https://github.com/PostHog/posthog-js/pull/2915) [`e105fd0`](https://github.com/PostHog/posthog-js/commit/e105fd06334e6953ed923c15f6b1392cafce0322) Thanks [@richardsolomou](https://github.com/richardsolomou)! - feat(llma): add time to first token reporting
  (2026-01-29)

## 7.7.0

### Minor Changes

- [#2982](https://github.com/PostHog/posthog-js/pull/2982) [`ce9b4db`](https://github.com/PostHog/posthog-js/commit/ce9b4dbbecfd831f76d974ae74a0b84952c3996f) Thanks [@Radu-Raicea](https://github.com/Radu-Raicea)! - Add prompt management functions.
  (2026-01-28)

## 7.6.1

### Patch Changes

- Updated dependencies [[`8c0c495`](https://github.com/PostHog/posthog-js/commit/8c0c495caaf4cd7f950cbc77fdfc1df499772008)]:
  - @posthog/core@1.15.0
  - posthog-node@5.24.4

## 7.6.0

### Minor Changes

- [#2955](https://github.com/PostHog/posthog-js/pull/2955) [`6db4b48`](https://github.com/PostHog/posthog-js/commit/6db4b487c0e14707c14e248c620eced5ef4166e0) Thanks [@richardsolomou](https://github.com/richardsolomou)! - Add `rawUsage` field to capture raw provider usage metadata for backend cost calculations
  (2026-01-27)

### Patch Changes

- [#2974](https://github.com/PostHog/posthog-js/pull/2974) [`93da719`](https://github.com/PostHog/posthog-js/commit/93da719335372135a5ebefddeb9f6ed571d4ef5d) Thanks [@dependabot](https://github.com/apps/dependabot)! - dependencies updates: - Updated dependency [`@google/genai@^1.38.0` ↗︎](https://www.npmjs.com/package/@google/genai/v/1.38.0) (from `^1.34.0`, in `dependencies`) - Updated dependency [`@langchain/core@^1.1.17` ↗︎](https://www.npmjs.com/package/@langchain/core/v/1.1.17) (from `^1.1.8`, in `dependencies`) (2026-01-27)

- [#2977](https://github.com/PostHog/posthog-js/pull/2977) [`5544606`](https://github.com/PostHog/posthog-js/commit/5544606e159bd0589f04a9571b3ce99582b917bf) Thanks [@andrewm4894](https://github.com/andrewm4894)! - fix: sanitize base64 images before formatting in Responses API to prevent 413 payload-too-large errors
  (2026-01-27)
- Updated dependencies [[`f51560c`](https://github.com/PostHog/posthog-js/commit/f51560caf78386cef5278f7cf0e9f253b2ec0e50)]:
  - @posthog/core@1.14.1
  - posthog-node@5.24.3

## 7.5.4

### Patch Changes

- Updated dependencies [[`933c763`](https://github.com/PostHog/posthog-js/commit/933c7639ae30390ca562a0891d59649711b53522)]:
  - @posthog/core@1.14.0
  - posthog-node@5.24.2

## 7.5.3

### Patch Changes

- Updated dependencies [[`8a5a3d5`](https://github.com/PostHog/posthog-js/commit/8a5a3d5693facda62b90b66dead338f7dca19705)]:
  - @posthog/core@1.13.0
  - posthog-node@5.24.1

## 7.5.2

### Patch Changes

- Updated dependencies [[`b7fa003`](https://github.com/PostHog/posthog-js/commit/b7fa003ef6ef74bdf4666be0748d89a5a6169054), [`f0cbc0d`](https://github.com/PostHog/posthog-js/commit/f0cbc0d8e4e5efc27d9595676e886d6d3d3892f4)]:
  - @posthog/core@1.12.0
  - posthog-node@5.24.0

## 7.5.1

### Patch Changes

- Updated dependencies [[`23770e9`](https://github.com/PostHog/posthog-js/commit/23770e9e2eed1aca5c2bc7a34a6d64dc115b0d11)]:
  - @posthog/core@1.11.0
  - posthog-node@5.23.0

## 7.5.0

### Minor Changes

- [#2930](https://github.com/PostHog/posthog-js/pull/2930) [`c9b773a`](https://github.com/PostHog/posthog-js/commit/c9b773aefd25fcc81a60dff02348e8e724b87565) Thanks [@marandaneto](https://github.com/marandaneto)! - chore: Bump node min. ^20.20.0 || >=22.22.0 due to https://nodejs.org/en/blog/vulnerability/january-2026-dos-mitigation-async-hooks
  (2026-01-19)

### Patch Changes

- Updated dependencies [[`c9b773a`](https://github.com/PostHog/posthog-js/commit/c9b773aefd25fcc81a60dff02348e8e724b87565)]:
  - posthog-node@5.22.0

## 7.4.3

### Patch Changes

- Updated dependencies [[`d37e570`](https://github.com/PostHog/posthog-js/commit/d37e5709863e869825df57d0854588140c4294b2)]:
  - @posthog/core@1.10.0
  - posthog-node@5.21.1

## 7.4.2

### Patch Changes

- [#2852](https://github.com/PostHog/posthog-js/pull/2852) [`308daf0`](https://github.com/PostHog/posthog-js/commit/308daf00035a7e38b2bc5969bf0cbe3ccacae5f6) Thanks [@andrewm4894](https://github.com/andrewm4894)! - fix(vercel): preserve prototype getter properties when wrapping models
  (2026-01-12)

## 7.4.1

### Patch Changes

- [#2859](https://github.com/PostHog/posthog-js/pull/2859) [`636e25f`](https://github.com/PostHog/posthog-js/commit/636e25f8a54c44094dfb7f771fa0573fb3c531c1) Thanks [@carlos-marchal-ph](https://github.com/carlos-marchal-ph)! - Fixes cache creation cost for Vercel V3 with Anthropic
  (2026-01-08)

## 7.4.0

### Minor Changes

- [#2593](https://github.com/PostHog/posthog-js/pull/2593) [`fba9fb2`](https://github.com/PostHog/posthog-js/commit/fba9fb2ea4be2ea396730741b4718b4a2c80d026) Thanks [@daibhin](https://github.com/daibhin)! - track LLMA trace_id on exceptions and exception_id on traces
  (2026-01-08)

### Patch Changes

- Updated dependencies [[`fba9fb2`](https://github.com/PostHog/posthog-js/commit/fba9fb2ea4be2ea396730741b4718b4a2c80d026), [`c1ed63b`](https://github.com/PostHog/posthog-js/commit/c1ed63b0f03380a5e4bb2463491b3f767f64a514)]:
  - posthog-node@5.20.0
  - @posthog/core@1.9.1

## 7.3.2

### Patch Changes

- [#2838](https://github.com/PostHog/posthog-js/pull/2838) [`c64a15d`](https://github.com/PostHog/posthog-js/commit/c64a15da69a059a539acf8b75c3be47200028e0b) Thanks [@carlos-marchal-ph](https://github.com/carlos-marchal-ph)! - Fixes cache creation cost for Langchain with Anthropic
  (2026-01-07)

- [#2842](https://github.com/PostHog/posthog-js/pull/2842) [`0f508e9`](https://github.com/PostHog/posthog-js/commit/0f508e91ca8a8622e69728a0c00a79aaaa387e9a) Thanks [@carlos-marchal-ph](https://github.com/carlos-marchal-ph)! - Fixes an error with certain AI imports when using CJS (`TypeError: Class extends value undefined is not a constructor or null`)
  (2026-01-07)

## 7.3.1

### Patch Changes

- [#2850](https://github.com/PostHog/posthog-js/pull/2850) [`b5dbf56`](https://github.com/PostHog/posthog-js/commit/b5dbf56a6482025629a573c44cc8518cfde798c7) Thanks [@andrewm4894](https://github.com/andrewm4894)! - fix(gemini): expose all GoogleGenAI constructor parameters in wrapper

  The `MonitoringGeminiConfig` interface now extends `GoogleGenAIOptions` from `@google/genai`, allowing users to pass all available constructor parameters like `googleAuthOptions` and `httpOptions` without TypeScript errors. (2026-01-06)

## 7.3.0

### Minor Changes

- [#2711](https://github.com/PostHog/posthog-js/pull/2711) [`8c3a21e`](https://github.com/PostHog/posthog-js/commit/8c3a21e6b857752677af50ccc7b0c7b5821e1a6d) Thanks [@andrewm4894](https://github.com/andrewm4894)! - Add support for both Vercel AI SDK 5 and 6

  Changes:
  - Runtime version detection via `model.specificationVersion`
  - Support both `LanguageModelV2` (SDK 5) and `LanguageModelV3` (SDK 6)
  - `@ai-sdk/provider` is now an optional peer dependency (supports both v2 and v3)
  - Removed unused `ai` peer dependency (only type imports from `@ai-sdk/provider` are used)
  - No breaking changes - existing SDK 5 users can continue without modification (2025-12-22)

### Patch Changes

- [#2789](https://github.com/PostHog/posthog-js/pull/2789) [`6b415a0`](https://github.com/PostHog/posthog-js/commit/6b415a07c69f36cbfadb181ba7e8606e9a4e92f0) Thanks [@andrewm4894](https://github.com/andrewm4894)! - fix: extract model from response for OpenAI stored prompts

  When using OpenAI stored prompts, the model is defined in the OpenAI dashboard rather than passed in the API request. This change adds a fallback to extract the model from the response object when not provided in kwargs. (2025-12-22)

- Updated dependencies [[`04065b9`](https://github.com/PostHog/posthog-js/commit/04065b9942da4545553859af5195587e5348bceb)]:
  - posthog-node@5.18.0

## 7.2.2

### Patch Changes

- [#2761](https://github.com/PostHog/posthog-js/pull/2761) [`6f5db7c`](https://github.com/PostHog/posthog-js/commit/6f5db7cb6d96bcd67193f0ad0e08ec7756be8c67) Thanks [@dependabot](https://github.com/apps/dependabot)! - dependencies updates: - Updated dependency [`@anthropic-ai/sdk@^0.71.2` ↗︎](https://www.npmjs.com/package/@anthropic-ai/sdk/v/0.71.2) (from `^0.67.1`, in `dependencies`) - Updated dependency [`@google/genai@^1.33.0` ↗︎](https://www.npmjs.com/package/@google/genai/v/1.33.0) (from `^1.31.0`, in `dependencies`) - Updated dependency [`@langchain/core@^1.1.5` ↗︎](https://www.npmjs.com/package/@langchain/core/v/1.1.5) (from `^1.1.4`, in `dependencies`) - Updated dependency [`ai@^5.0.113` ↗︎](https://www.npmjs.com/package/ai/v/5.0.113) (from `^5.0.107`, in `dependencies`) - Updated dependency [`langchain@^1.2.0` ↗︎](https://www.npmjs.com/package/langchain/v/1.2.0) (from `^1.1.5`, in `dependencies`) (2025-12-16)

## 7.2.1

### Patch Changes

- [#2690](https://github.com/PostHog/posthog-js/pull/2690) [`e9c00fd`](https://github.com/PostHog/posthog-js/commit/e9c00fd451f6ee648ff40dcad538d38bfd5f3ff4) Thanks [@robbie-c](https://github.com/robbie-c)! - Related to https://www.wiz.io/blog/critical-vulnerability-in-react-cve-2025-55182

  We didn't include any of the vulnerable deps in any of our packages, however we did have them as dev / test / example project dependencies.

  There was no way that any of these vulnerable packages were included in any of our published packages.

  We've now patched out those dependencies.

  Out of an abundance of caution, let's create a new release of all of our packages. (2025-12-04)

- Updated dependencies [[`e9c00fd`](https://github.com/PostHog/posthog-js/commit/e9c00fd451f6ee648ff40dcad538d38bfd5f3ff4)]:
  - posthog-node@5.17.1

## 7.2.0

### Minor Changes

- [#2619](https://github.com/PostHog/posthog-js/pull/2619) [`86dab38`](https://github.com/PostHog/posthog-js/commit/86dab38e49eeac9819b1ab5f7f0c8b5df88d9f86) Thanks [@hpouillot](https://github.com/hpouillot)! - package deprecation
  (2025-11-24)

### Patch Changes

- Updated dependencies [[`86dab38`](https://github.com/PostHog/posthog-js/commit/86dab38e49eeac9819b1ab5f7f0c8b5df88d9f86)]:
  - posthog-node@5.14.0

## 7.1.2

### Patch Changes

- [#2618](https://github.com/PostHog/posthog-js/pull/2618) [`3eed1a4`](https://github.com/PostHog/posthog-js/commit/3eed1a42a50bff310fde3a91308a0f091b39e3fe) Thanks [@marandaneto](https://github.com/marandaneto)! - last version was compromised
  (2025-11-24)
- Updated dependencies [[`3eed1a4`](https://github.com/PostHog/posthog-js/commit/3eed1a42a50bff310fde3a91308a0f091b39e3fe)]:
  - posthog-node@5.13.3

## 7.1.1

### Patch Changes

- [#2591](https://github.com/PostHog/posthog-js/pull/2591) [`3dbf325`](https://github.com/PostHog/posthog-js/commit/3dbf325e21387cb704142c0f0592ad4616e49f8b) Thanks [@carlos-marchal-ph](https://github.com/carlos-marchal-ph)! - Fixes a bug that incorrectly calculated cache costs for non-Anthropic Langchain providers
  (2025-11-21)

## 7.1.0

### Minor Changes

- [#2498](https://github.com/PostHog/posthog-js/pull/2498) [`aa9f637`](https://github.com/PostHog/posthog-js/commit/aa9f63715d70428c8773c0c6e3d334497ffd3ad4) Thanks [@Tehnix](https://github.com/Tehnix)! - Added support for OpenAI audio transcriptions API. You can now track and monitor OpenAI Whisper transcription requests through the @posthog/ai SDK, with support for both streaming and non-streaming transcriptions, verbose JSON responses, and all standard transcription parameters (language, response_format, timestamp_granularities).

## 7.0.0

### Major Changes

- [#2554](https://github.com/PostHog/posthog-js/pull/2554) [`8e8d2f5`](https://github.com/PostHog/posthog-js/commit/8e8d2f530f0676463b6e36a710f4301119960e2e) Thanks [@carlos-marchal-ph](https://github.com/carlos-marchal-ph)! - Update LLM provider SDKs to latest versions
  - `openai`: **5.20.1 → 6.8.1**
  - `@anthropic-ai/sdk`: 0.63.1 → 0.67.0
  - `@google/genai`: 1.19.0 → 1.29.0
  - `langchain`: **0.3.33 → 1.0.0**
  - `@langchain/core`: **0.3.75 → 1.0.0**
  - `ai`: 5.0.42 → 5.0.87
  - `zod`: 4.1.5 → 4.1.8

## 6.6.0

### Minor Changes

- [#2518](https://github.com/PostHog/posthog-js/pull/2518) [`aca2775`](https://github.com/PostHog/posthog-js/commit/aca27758b350966ace7b7f051148b47d345a9f9c) Thanks [@Radu-Raicea](https://github.com/Radu-Raicea)! - feat(llma): send number of web searches calls

## 6.5.1

### Patch Changes

- [#2537](https://github.com/PostHog/posthog-js/pull/2537) [`fb2fa06`](https://github.com/PostHog/posthog-js/commit/fb2fa06d50fe6527c77d84305dc9ddeb69a30438) Thanks [@Radu-Raicea](https://github.com/Radu-Raicea)! - fix(llma): cache cost calculation in the LangChain callback

## 6.5.0

### Minor Changes

- [#2496](https://github.com/PostHog/posthog-js/pull/2496) [`7253bb3`](https://github.com/PostHog/posthog-js/commit/7253bb30b6305b29f885eed2c542f2f6686efb0f) Thanks [@andrewm4894](https://github.com/andrewm4894)! - feat: add $ai_framework property for framework integrations

  Adds a simple `$ai_framework` property to AI events when using framework layers (LangChain, Vercel AI SDK). Direct provider calls (OpenAI, Anthropic, Gemini) do not include this property, eliminating redundant data where framework would duplicate the provider name.

  **Example with framework:**

  ```json
  {
    "$ai_framework": "langchain",
    "$ai_provider": "openai",
    "$ai_model": "gpt-4"
  }
  ```

  **Example without framework:**

  ```json
  {
    "$ai_provider": "openai",
    "$ai_model": "gpt-4"
  }
  ```

## 6.4.4

### Patch Changes

- [#2468](https://github.com/PostHog/posthog-js/pull/2468) [`873538b`](https://github.com/PostHog/posthog-js/commit/873538b9615626ad274be559f93a5fbaaa8ba8b9) Thanks [@andrewm4894](https://github.com/andrewm4894)! - fix: prevent [object Object] in content serialization - structured content is now properly JSON-stringified instead of being converted to "[object Object]"

## 6.4.3

### Patch Changes

- [#2364](https://github.com/PostHog/posthog-js/pull/2364) [`d91fef6`](https://github.com/PostHog/posthog-js/commit/d91fef61a4e866a02b9543234501487803fe4a5f) Thanks [@dependabot](https://github.com/apps/dependabot)! - Update Anthropic SDK

## 6.4.2

### Patch Changes

- [#2354](https://github.com/PostHog/posthog-js/pull/2354) [`1118d4d`](https://github.com/PostHog/posthog-js/commit/1118d4d0e9dad1bb0471fab0036695722c52ad85) Thanks [@carlos-marchal-ph](https://github.com/carlos-marchal-ph)! - Ensure consistent hadling of system prompts

## 6.4.1

### Patch Changes

- [#2299](https://github.com/PostHog/posthog-js/pull/2299) [`80a262c`](https://github.com/PostHog/posthog-js/commit/80a262c728cd893a79090e9019c08640961dada1) Thanks [@k11kirky](https://github.com/k11kirky)! - Fix for zod schema

## 6.4.0

### Minor Changes

- [#2317](https://github.com/PostHog/posthog-js/pull/2317) [`14bb69e`](https://github.com/PostHog/posthog-js/commit/14bb69ef36d13e08a4af2aa506e5caaa19d1684a) Thanks [@carlos-marchal-ph](https://github.com/carlos-marchal-ph)! - Dependencies updated to support latest APIs from provider SDKs

## 6.3.3

### Patch Changes

- [#2324](https://github.com/PostHog/posthog-js/pull/2324) [`0b7ec25`](https://github.com/PostHog/posthog-js/commit/0b7ec2513da8c57df33fe578c2f9cbca33a29829) Thanks [@carlos-marchal-ph](https://github.com/carlos-marchal-ph)! - Ensure Posthog parameters are not passed to any provider

## 6.3.2

### Patch Changes

- [#2272](https://github.com/PostHog/posthog-js/pull/2272) [`9eccea4`](https://github.com/PostHog/posthog-js/commit/9eccea4b7d6a11468d9c890eae4b51be8710c9cf) Thanks [@carlos-marchal-ph](https://github.com/carlos-marchal-ph)! - Don't send Posthog specific params to OpenAI

## 6.3.1

### Patch Changes

- [#2264](https://github.com/PostHog/posthog-js/pull/2264) [`cb5dd15`](https://github.com/PostHog/posthog-js/commit/cb5dd15632b3436db21b320a84d76fe739851a2f) Thanks [@carlos-marchal-ph](https://github.com/carlos-marchal-ph)! - Fixes noisy truncation function

## 6.3.0

### Minor Changes

- [#2253](https://github.com/PostHog/posthog-js/pull/2253) [`6461420`](https://github.com/PostHog/posthog-js/commit/6461420953d741dccae434d55637665c4c9f98dc) Thanks [@carlos-marchal-ph](https://github.com/carlos-marchal-ph)! - Adds support for embeddings for OpenAI and Azure OpenAI

## 6.2.0

### Minor Changes

- [#2252](https://github.com/PostHog/posthog-js/pull/2252) [`a806e49`](https://github.com/PostHog/posthog-js/commit/a806e494bc995cad4526fbac29a150e3942cae37) Thanks [@Radu-Raicea](https://github.com/Radu-Raicea)! - send ai library version in events

## 6.1.2

### Patch Changes

- [#2230](https://github.com/PostHog/posthog-js/pull/2230) [`8ed50be`](https://github.com/PostHog/posthog-js/commit/8ed50be767028eaaa8b3ce4f299d6878c35c4ced) Thanks [@Radu-Raicea](https://github.com/Radu-Raicea)! - Fixes tool calls for streaming providers

## 6.1.1

### Patch Changes

- [#2217](https://github.com/PostHog/posthog-js/pull/2217) [`fdfceeb`](https://github.com/PostHog/posthog-js/commit/fdfceebf349242e47bb4e444d60f8fc546663581) Thanks [@Radu-Raicea](https://github.com/Radu-Raicea)! - add base64 inline image sanitization

## 6.1.0

### Minor Changes

- [#2216](https://github.com/PostHog/posthog-js/pull/2216) [`57752f4`](https://github.com/PostHog/posthog-js/commit/57752f4163ec3a52fd378a6e6a4473d26e7f3c2c) Thanks [@k11kirky](https://github.com/k11kirky)! - Add support for reasoning and cache tokens in gemini + fix token calc in vercel

## 6.0.1

### Patch Changes

- [#2199](https://github.com/PostHog/posthog-js/pull/2199) [`d887947`](https://github.com/PostHog/posthog-js/commit/d887947317fed0da3737b752c1f5e680fddd44eb) Thanks [@k11kirky](https://github.com/k11kirky)! - Fix bug with vercel output mapping

## 6.0.0

### Major Changes

- [#2191](https://github.com/PostHog/posthog-js/pull/2191) [`65d72b4`](https://github.com/PostHog/posthog-js/commit/65d72b4f1495b3a932936d87ca53b518f0a7b9da) Thanks [@k11kirky](https://github.com/k11kirky)! - Updated Vercel AI SDK to v5

### Patch Changes

- [#2195](https://github.com/PostHog/posthog-js/pull/2195) [`f6fdd8e`](https://github.com/PostHog/posthog-js/commit/f6fdd8ecd8b011162e34263f7096e190b4b9c453) Thanks [@Radu-Raicea](https://github.com/Radu-Raicea)! - Fix tool calls for all non-streaming providers

## 5.2.3

### Patch Changes

- [#2173](https://github.com/PostHog/posthog-js/pull/2173) [`d4204f4`](https://github.com/PostHog/posthog-js/commit/d4204f473ebaee42c696523306ea8e6fe97f0dfd) Thanks [@Radu-Raicea](https://github.com/Radu-Raicea)! - Fix bug where tool calls were not sent in LangChain

## 5.2.2

- Add support for parsing tool calls from reasoning models in LangChain by converting the tool call format to the expected shape

## 5.2.1

- Fix crash when importing @posthog/ai with OpenAI SDK v5.x by deferring access to Chat, Completions, and Responses classes until runtime

## 5.2.0

- Fix anonymous events

## 5.1.0

- Add responses + parse

## 5.0.1

- Bump posthog-node to v5.0.0

## 5.0.0

- Major bump for breaking change:
- Require node engine >20
- support for @google/genai

## 4.4.0

- Make `posthog-node` a peer dependency to avoid bundling implementation code

## 4.3.2

- Fix exported file extensions to work with older Node versions

## 4.3.1

- Remove fullDebug mode
- Add posthogCaptureImmediate to await a promise for each capture (for serverless environments)
- Fix openai test

## 4.2.1

- Add fullDebug mode and limit full size of event input

## 4.1.0

- add truncation to vercel ai sdk inputs and outputs

## 4.0.1

- add new util to sanitize inputs, outputs and errors

## 4.0.0

- feat: separate out packages as separate exports so you can import { OpenAI } from @posthog/ai/openai and reduce import size

## 3.3.2 - 2025-03-25

- fix: langchain name mapping

## 3.3.1 - 2025-03-13

- fix: fix vercel output mapping and token caching

## 3.3.0 - 2025-03-08

- feat: add reasoning and cache tokens to openai and anthropic
- feat: add tool support for vercel
- feat: add support for other media types vercel

## 3.2.1 - 2025-02-11

- fix: add experimental_wrapLanguageModel to vercel middleware supporting older versions of ai

## 3.2.0 - 2025-02-11

- feat: change how we handle streaming support for openai and anthropic

## 3.1.1 - 2025-02-07

- fix: bump ai to 4.1.0

## 3.1.0 - 2025-02-07

- feat: add posthogCostOverride, posthogModelOverride, and posthogProviderOverride to sendEventToPosthog for vercel

## 2.4.0 - 2025-02-03

- feat: add anthropic support for sdk
