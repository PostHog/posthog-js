name: Bundled Size

on: [pull_request]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      - uses: preactjs/compressed-size-action@v2
        with:
          build-script: "build-rollup"
          compression: "none"
          # no need to report on files that aren't the interesting ones
          exclude: "{./dist/es.js,./dist/module.js,./dist/array.full.js}"
          # no need to report on very small byte changes which show as 0% changed
          minimum-change-threshold: 300
